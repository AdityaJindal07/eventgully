<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q"
        crossorigin="anonymous"></script>

    <script src="https://code.jquery.com/jquery-3.7.1.min.js"
        integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
        integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.min.js"
        integrity="sha384-7qAoOXltbVP82dhxHAUje59V5r2YsVfBafyUDxEdApLPmcdhBPg1DKg1ERo0BZlK"
        crossorigin="anonymous"></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.3/angular.min.js"></script>


    <script>
        var mymodule = angular.module("kuchModule", []);


        mymodule.controller("kuchController", function ($scope, $http) {
            $scope.jsonArray = [];
            $scope.selStates;
            $scope.selGame;


            $scope.doFetchAll = function () {
                var url = "/do-fetch-all-tournaments?kuchState=" + $scope.selStates + "&kuchGame=" + $scope.selGame;


                $http.get(url).then(allGoodFx, someBadFx);
                function allGoodFx(response) {
                    //resp in JSON array
                    // alert(JSON.stringify(response.data));
                    $scope.jsonArray = response.data;
                }

                function someBadFx(response) {
                    alert(JSON.stringify(response.data));
                }
            };

            $scope.states = [{}];
            $scope.doFetchAllStates = function () {
                var url = "/do-fetch-all-states";

                $http.get(url).then(allGoodFx, someBadFx);

                function allGoodFx(response) {
                    $scope.states = response.data;
                }
                function someBadFx(response) {
                    alert(JSON.stringify(response.data));
                }
            }

            $scope.oneRecord = {};
            $scope.doShowDetails = function (index) {
                //alert(JSON.stringify($scope.jsonArray[index]))
                $scope.oneRecord = $scope.jsonArray[index];

            }
        });
    </script>

</head>

<body ng-app="kuchModule" ng-controller="kuchController" ng-init="doFetchAllStates();">

    <center>

        <h2>All Tournaments</h2>
        <div class="d-flex justify-content-center">
            
            <div class="sel1 col-4 m-2">
                <h5>Game:</h5>
                <select class="form-select" aria-label="Default select example" ng-model="selGame">
                    <option value="none">Select</option>
                    <option value="Archery">Archery</option>
                    <option value="Athletics">Athletics</option>
                    <option value="Badminton">Badminton</option>
                    <option value="Baseball">Baseball</option>
                    <option value="Basketball">Basketball</option>
                    <option value="Boxing">Boxing</option>
                    <option value="Carrom">Carrom</option>
                    <option value="Chess">Chess</option>
                    <option value="Cricket">Cricket</option>
                    <option value="Cycling">Cycling</option>
                    <option value="Football">Football</option>
                    <option value="Golf">Golf</option>
                    <option value="Gymnastics">Gymnastics</option>
                    <option value="Handball">Handball</option>
                    <option value="Hockey">Hockey</option>
                    <option value="Judo">Judo</option>
                    <option value="Kabaddi">Kabaddi</option>
                    <option value="Kho Kho">Kho Kho</option>
                    <option value="Lawn Tennis">Lawn Tennis</option>
                    <option value="Martial Arts">Martial Arts</option>
                    <option value="Shooting">Shooting</option>
                    <option value="Skating">Skating</option>
                    <option value="Squash">Squash</option>
                    <option value="Swimming">Swimming</option>
                    <option value="Table Tennis">Table Tennis</option>
                    <option value="Taekwondo">Taekwondo</option>
                    <option value="Volleyball">Volleyball</option>
                    <option value="Weightlifting">Weightlifting</option>
                    <option value="Wrestling">Wrestling</option>

                </select>
            </div>
            <div class="sel2 col-4 m-2">
                <h5>State:</h5>
                <select class="form-select" aria-label="Default select example" ng-model="selStates">
                    <option value="none">select</option>
                    <option ng-repeat="obj in states" value={{obj.inputState}}>{{obj.inputState}}</option>
                </select>
            </div>
        </div>

        <input type="button" class="btn btn-dark" value="Find Tournaments" ng-click="doFetchAll();">


        <div class="container">
            <div class="row">
                <div class="col-md-2  p-3 mb-2" ng-repeat="obj in jsonArray">
                    <div class="card-body p-3 rounded shadow-lg" style="border: 1px solid black;">



                        <div class="card-body">

                            <h3 class="card-title">
                                {{obj.eventname}}
                            </h3>
                            <br>
                            <h5 class="card-title">
                                {{obj.Category}}
                            </h5>
                            <br>



                            <a href="#" class="btn btn-dark" data-bs-toggle="modal" data-bs-target="#detailsModal"
                                ng-click="doShowDetails($index);">Details</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!--modal --------------------- -->
        <div class="modal fade" id="detailsModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h1 class="modal-title fs-5" id="exampleModalLabel">{{oneRecord.eventname}}</h1>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">



                        <p>
                           <b> Emailid : {{oneRecord.emailid}}</b>
                        </p>
                        <p>
                          <b>  Date: {{oneRecord.doe}}</b>
                        </p>
                        <p>
                          <b>  Venue: {{oneRecord.Address}}</b>
                        </p>
                        <p>
                           <b> Time: {{oneRecord.toe}}</b>
                        </p>
                        <p>
                           <b> Minimum-Age: {{oneRecord.minage}}</b>
                        </p>
                        <p>
                           <b> Maximum-Age: {{oneRecord.maxage}}</b>
                        </p>
                        <p>
                          <b>  contact: {{oneRecord.contact}}</b>
                        </p>
                        <p>
                           <b> last-date: {{oneRecord.lastDate}}</b>
                        </p>
                        <p>
                          <b>  fee: {{oneRecord.fee}}</b>
                        </p>
                        <p>
                           <b> Prize Money: {{oneRecord.pMny}}</b>
                        </p>
                        <p>
                           <b> Other-Info: {{oneRecord.otherinfo}}</b>
                        </p>
                    </div>

                </div>
            </div>
        </div>
    </center>


</body>

</html>